# ğŸ—ï¸ ML System Architecture Diagram

## Overall Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SNOWFLAKE DATA WAREHOUSE                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚   BRONZE     â”‚   â”‚    SILVER    â”‚   â”‚  ANALYTICS   â”‚               â”‚
â”‚  â”‚   (Raw)      â”‚â”€â”€â–¶â”‚  (Cleaned)   â”‚â”€â”€â–¶â”‚  (Enriched)  â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                               â”‚                          â”‚
â”‚                                               â–¼                          â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚                     â”‚  ML_PROMO_EFFECTIVENESS            â”‚              â”‚
â”‚                     â”‚  - 16 features                     â”‚              â”‚
â”‚                     â”‚  - 3 target variables              â”‚              â”‚
â”‚                     â”‚  - Historical promo data           â”‚              â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                               â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                                â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   PYTHON ML PIPELINE              â”‚
                        â”‚   (promo_optimizer.py)            â”‚
                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                        â”‚  1. Load data from Snowflake      â”‚
                        â”‚  2. Feature engineering           â”‚
                        â”‚  3. Train Classifier              â”‚
                        â”‚  4. Train Regressor               â”‚
                        â”‚  5. Save models (.pkl)            â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                                â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   SAVED MODELS                    â”‚
                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                        â”‚  â€¢ promo_classifier.pkl           â”‚
                        â”‚  â€¢ promo_regressor.pkl            â”‚
                        â”‚  â€¢ label_encoders.pkl             â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                                â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   STREAMLIT DASHBOARD             â”‚
                        â”‚   (7_Promo_Planner.py)            â”‚
                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                        â”‚  1. Load models                   â”‚
                        â”‚  2. User inputs parameters        â”‚
                        â”‚  3. Predict success & lift        â”‚
                        â”‚  4. Calculate ROI                 â”‚
                        â”‚  5. Show recommendations          â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                                â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   MARKETING TEAM                  â”‚
                        â”‚   (End Users)                     â”‚
                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                        â”‚  âœ… Plan smarter promos           â”‚
                        â”‚  âœ… Predict ROI before launch     â”‚
                        â”‚  âœ… Optimize discount levels      â”‚
                        â”‚  âœ… Save 20-30% budget            â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Feature Engineering Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SQL FEATURE ENGINEERING                            â”‚
â”‚                (2_ml_feature_tables.sql)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

INPUT TABLES                    FEATURES CREATED                 OUTPUT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€

SILVER.PROMOTIONS    â”€â”€â”
                       â”œâ”€â”€â–¶  â€¢ Promo attributes         â”€â”€â”
                       â”‚       - Discount %                â”‚
                       â”‚       - Duration                  â”‚
                       â”‚       - Type, Category            â”‚
                       â”‚                                   â”‚
SILVER.TRANSACTIONS  â”€â”€â”¤     â€¢ Baseline sales (30d)       â”œâ”€â”€â–¶  ML_PROMO_
                       â”‚       - Avg daily sales           â”‚    EFFECTIVENESS
                       â”‚       - Avg transaction           â”‚    
                       â”‚       - Daily transactions        â”‚    (Training 
SILVER.CAMPAIGNS     â”€â”€â”¤                                   â”‚     Dataset)
                       â”‚     â€¢ Campaign overlap            â”‚
                       â”‚       - Has overlap flag          â”‚
                       â”‚       - Number of campaigns       â”‚
                       â”‚                                   â”‚
DATE DIMENSION       â”€â”€â”˜     â€¢ Temporal features        â”€â”€â”˜
                             - Month, Quarter
                             - Day of week
                             - Holiday season
                             - Weekend flag

                             â€¢ Target variables
                             - IS_SUCCESSFUL (binary)
                             - SALES_LIFT_RATIO (%)
                             - ROI_PROXY (ratio)
```

---

## ML Model Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DUAL MODEL APPROACH                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                         INPUT: 16 FEATURES
                                  â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â–¼                                   â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  CLASSIFICATION MODEL â”‚         â”‚   REGRESSION MODEL    â”‚
    â”‚  (Gradient Boosting)  â”‚         â”‚  (Gradient Boosting)  â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ Target: IS_SUCCESSFUL â”‚         â”‚ Target: SALES_LIFT    â”‚
    â”‚ Output: Probability   â”‚         â”‚ Output: % Lift        â”‚
    â”‚ Range: 0-100%         â”‚         â”‚ Range: -50% to +100%  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   BUSINESS LOGIC         â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ â€¢ Calculate predicted    â”‚
                    â”‚   sales = baseline Ã—     â”‚
                    â”‚   (1 + lift)             â”‚
                    â”‚                          â”‚
                    â”‚ â€¢ Estimate cost =        â”‚
                    â”‚   sales Ã— discount%      â”‚
                    â”‚                          â”‚
                    â”‚ â€¢ Calculate ROI =        â”‚
                    â”‚   (incremental sales) /  â”‚
                    â”‚   (cost)                 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   RECOMMENDATIONS        â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ IF prob â‰¥ 70% AND        â”‚
                    â”‚    ROI â‰¥ 2.0x:           â”‚
                    â”‚    â†’ "STRONG GO"         â”‚
                    â”‚                          â”‚
                    â”‚ ELIF prob â‰¥ 50% OR       â”‚
                    â”‚      ROI â‰¥ 1.5x:         â”‚
                    â”‚    â†’ "OPTIMIZE"          â”‚
                    â”‚                          â”‚
                    â”‚ ELSE:                    â”‚
                    â”‚    â†’ "DON'T LAUNCH"      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## User Interaction Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STREAMLIT UI FLOW                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    USER OPENS PROMO PLANNER
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Check Models   â”‚  â”€â”€â”€â”€â–¶  If missing: Show instructions
    â”‚ Loaded?        â”‚         "Run training script first"
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ âœ…
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ SIDEBAR INPUT FORM         â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ Category:    [Beverages  â–¼]â”‚
    â”‚ Subcategory: [Soft Drinksâ–¼]â”‚
    â”‚ Type:        [% Off      â–¼]â”‚
    â”‚ Region:      [N. America â–¼]â”‚
    â”‚ Discount:    [20%] â—„â”€â”€â”€â”€â”€â–º â”‚
    â”‚ Duration:    [7 days]      â”‚
    â”‚ Start Date:  ğŸ“… Feb 15     â”‚
    â”‚ Campaign:    â˜‘ Yes         â”‚
    â”‚                            â”‚
    â”‚ [ğŸ”® Predict ROI]           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ Click
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ENCODE & PREPARE FEATURES  â”‚
    â”‚ â€¢ Label encode categories  â”‚
    â”‚ â€¢ Fetch baseline from DB   â”‚
    â”‚ â€¢ Calculate temporal vars  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ RUN ML PREDICTIONS         â”‚
    â”‚ â€¢ Classifier â†’ 75%         â”‚
    â”‚ â€¢ Regressor â†’ +15% lift    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ DISPLAY RESULTS (3 COLUMNS)            â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  Success Prob  â”‚ Sales Lift â”‚   ROI   â”‚
    â”‚     75% âœ…     â”‚   +15%     â”‚  2.4x   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ FINANCIAL BREAKDOWN                    â”‚
    â”‚ â€¢ Baseline: $50,000                    â”‚
    â”‚ â€¢ With promo: $57,500                  â”‚
    â”‚ â€¢ Incremental: $7,500                  â”‚
    â”‚ â€¢ Cost: $11,500                        â”‚
    â”‚ â€¢ Net benefit: -$4,000                 â”‚
    â”‚ â€¢ ROI: 0.65x                           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ RECOMMENDATIONS                        â”‚
    â”‚ âœ… STRONG GO                           â”‚
    â”‚ â€¢ High success probability             â”‚
    â”‚ â€¢ Excellent ROI                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ WHAT-IF ANALYSIS TABLE                 â”‚
    â”‚ Discountâ”‚Successâ”‚Liftâ”‚Salesâ”‚Costâ”‚ROI  â”‚
    â”‚   10%   â”‚  65%  â”‚+8% â”‚$54k â”‚$5k â”‚1.8x â”‚
    â”‚   15%   â”‚  70%  â”‚+12%â”‚$56k â”‚$8k â”‚2.1x â”‚
    â”‚   20%   â”‚  75%  â”‚+15%â”‚$58k â”‚$12kâ”‚2.4x â”‚â—„â”€ Best
    â”‚   25%   â”‚  78%  â”‚+17%â”‚$59k â”‚$15kâ”‚2.2x â”‚
    â”‚   30%   â”‚  80%  â”‚+18%â”‚$59k â”‚$18kâ”‚1.9x â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    USER MAKES DECISION:
    â€¢ Adjust parameters and re-predict
    â€¢ OR launch with confidence
```

---

## File System Layout

```
ARCHITECTURE_BIGDATA_2026/
â”‚
â”œâ”€â”€ sql/
â”‚   â””â”€â”€ phase_3/
â”‚       â”œâ”€â”€ 1_creation_data_product.sql       # Basic analytics tables
â”‚       â”œâ”€â”€ 2_ml_feature_tables.sql           # â­ ML features (NEW)
â”‚       â””â”€â”€ ML_USE_CASES_PROPOSAL.md          # Full ML strategy doc
â”‚
â”œâ”€â”€ streamlit/
â”‚   â”œâ”€â”€ Home.py                                # Main entry + navigation
â”‚   â”œâ”€â”€ _utils.py                              # Snowflake connection
â”‚   â”‚
â”‚   â”œâ”€â”€ ml_models/                             # â­ NEW FOLDER
â”‚   â”‚   â”œâ”€â”€ promo_optimizer.py                 # Training script
â”‚   â”‚   â””â”€â”€ saved_models/                      # Generated after training
â”‚   â”‚       â”œâ”€â”€ promo_classifier.pkl
â”‚   â”‚       â”œâ”€â”€ promo_regressor.pkl
â”‚   â”‚       â””â”€â”€ label_encoders.pkl
â”‚   â”‚
â”‚   â””â”€â”€ pages/
â”‚       â”œâ”€â”€ 1_Overview.py
â”‚       â”œâ”€â”€ 2_Sales.py
â”‚       â”œâ”€â”€ 3_Promotions.py
â”‚       â”œâ”€â”€ 4_Marketing_ROI.py
â”‚       â”œâ”€â”€ 5_Customers.py
â”‚       â”œâ”€â”€ 6_Ops_Logistics.py
â”‚       â””â”€â”€ 7_Promo_Planner.py                 # â­ NEW PAGE
â”‚
â”œâ”€â”€ requirements.txt                           # Python dependencies
â”œâ”€â”€ ML_IMPLEMENTATION_README.md                # â­ Comprehensive guide
â”œâ”€â”€ IMPLEMENTATION_SUMMARY.md                  # â­ Quick summary
â””â”€â”€ SETUP_INSTRUCTIONS.txt                     # â­ Step-by-step setup
```

---

## Data Dependencies

```
ML_PROMO_EFFECTIVENESS depends on:
  â”œâ”€â”€ SILVER.PROMOTIONS (promo attributes)
  â”œâ”€â”€ SILVER.TRANSACTIONS (sales data)
  â””â”€â”€ SILVER.CAMPAIGNS (campaign overlap)

Promo Optimizer (Python) depends on:
  â”œâ”€â”€ ML_PROMO_EFFECTIVENESS (training data)
  â”œâ”€â”€ scikit-learn (ML library)
  â””â”€â”€ pandas (data manipulation)

Promo Planner (Streamlit) depends on:
  â”œâ”€â”€ Saved models (.pkl files)
  â”œâ”€â”€ ML_PROMO_EFFECTIVENESS (baseline stats)
  â””â”€â”€ _utils.py (Snowflake connection)
```

---

## Training vs Inference

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TRAINING PHASE                               â”‚
â”‚                    (Run once, then retrain monthly)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Historical Data â†’ Feature Engineering â†’ Split Train/Test â†’ Train Models
(2010-2023)       (SQL)                 (80/20)           (Python)
                                                                â”‚
                                                                â–¼
                                                    Cross-Validation
                                                    Evaluate Metrics
                                                                â”‚
                                                                â–¼
                                                        Save Models
                                                        (.pkl files)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        INFERENCE PHASE                               â”‚
â”‚                    (Real-time, in production)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Input â†’ Encode Features â†’ Load Models â†’ Predict â†’ Calculate ROI
(New promo)   (Label encode)   (.pkl)       (Instant)  (Business logic)
                                                              â”‚
                                                              â–¼
                                                    Display Results
                                                    Show Recommendations
```

---

## Success Metrics Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      KPI TRACKING                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MODEL ACCURACY   â”‚  â”‚  USAGE STATS     â”‚  â”‚  BUSINESS IMPACT â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Classification:  â”‚  â”‚ Total Plans: 150 â”‚  â”‚ Budget Saved:    â”‚
â”‚   75% âœ…         â”‚  â”‚                  â”‚  â”‚   $180k â¬†        â”‚
â”‚                  â”‚  â”‚ Adopted: 80%     â”‚  â”‚                  â”‚
â”‚ Regression:      â”‚  â”‚                  â”‚  â”‚ Avg ROI:         â”‚
â”‚   RÂ² = 0.68 âœ…   â”‚  â”‚ Plans/week: 12   â”‚  â”‚   2.3x â¬†         â”‚
â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
â”‚ MAE: 0.08        â”‚  â”‚ Rejections: 30%  â”‚  â”‚ Success Rate:    â”‚
â”‚                  â”‚  â”‚   (low ROI)      â”‚  â”‚   68% â¬†          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Legend:**
- â­ = New file created
- âœ… = Completed/Working
- â¬† = Improved vs baseline
- â†’ = Data/Control flow
- â–¼ = Next step

